(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["VueQueryBuilder"]=t():e["VueQueryBuilder"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function r(u){if(t[u])return t[u].exports;var l=t[u]={i:u,l:!1,exports:{}};return e[u].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=e,r.c=t,r.d=function(e,t,u){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(u,l,function(t){return e[t]}.bind(null,l));return u},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({"1eb2":function(e,t,r){"use strict";var u;"undefined"!==typeof window&&(r("f6fd"),(u=window.document.currentScript)&&(u=u.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(r.p=u[1]))},"253b":function(e,t,r){"use strict";var u=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=u(r("aac1")),n=u(r("9bf5")),a={matchType:"Match Type",matchTypes:[{id:"all",label:"All"},{id:"any",label:"Any"}],addRule:"Add Rule",removeRule:"&times;",addGroup:"Add Group",removeGroup:"&times;",textInputPlaceholder:"value"},o={name:"vue-query-builder",components:{QueryBuilderGroup:l.default},props:{rules:Array,labels:{type:Object,default(){return a}},styled:{type:Boolean,default:!0},maxDepth:{type:Number,default:3,validator:function(e){return e>=1}},value:Object},data(){return{depth:1,query:{logicalOperator:this.labels.matchTypes[0].id,children:[]},ruleTypes:{text:{operators:["equals","does not equal","contains","does not contain","is empty","is not empty","begins with","ends with"],inputType:"text",id:"text-field"},numeric:{operators:["=","<>","<","<=",">",">="],inputType:"number",id:"number-field"},custom:{operators:[],inputType:"text",id:"custom-field"},radio:{operators:[],choices:[],inputType:"radio",id:"radio-field"},checkbox:{operators:[],choices:[],inputType:"checkbox",id:"checkbox-field"},select:{operators:[],choices:[],inputType:"select",id:"select-field"},"multi-select":{operators:["="],choices:[],inputType:"select",id:"multi-select-field"}}}},computed:{mergedLabels(){return Object.assign({},a,this.labels)},mergedRules(){var e=[],t=this;return t.rules.forEach(function(r){"undefined"!==typeof t.ruleTypes[r.type]?e.push(Object.assign({},t.ruleTypes[r.type],r)):e.push(r)}),e}},mounted(){this.$watch("query",e=>{JSON.stringify(e)!==JSON.stringify(this.value)&&this.$emit("input",(0,n.default)(e))},{deep:!0}),this.$watch("value",e=>{JSON.stringify(e)!==JSON.stringify(this.query)&&(this.query=(0,n.default)(e))},{deep:!0}),"undefined"!==typeof this.$options.propsData.value&&(this.query=Object.assign(this.query,this.$options.propsData.value))}};t.default=o},2877:function(e,t,r){"use strict";function u(e,t,r,u,l,n,a,o){var s,i="function"===typeof e?e.options:e;if(t&&(i.render=t,i.staticRenderFns=r,i._compiled=!0),u&&(i.functional=!0),n&&(i._scopeId="data-v-"+n),a?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},i._ssrRegister=s):l&&(s=o?function(){l.call(this,this.$root.$options.shadowRoot)}:l),s)if(i.functional){i._injectStyles=s;var c=i.render;i.render=function(e,t){return s.call(t),c(e,t)}}else{var d=i.beforeCreate;i.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:i}}r.d(t,"a",function(){return u})},"328a":function(e,t,r){"use strict";r.r(t);var u=r("253b"),l=r.n(u);for(var n in u)"default"!==n&&function(e){r.d(t,e,function(){return u[e]})}(n);t["default"]=l.a},"4ea4":function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}e.exports=r},"5df9":function(e,t,r){"use strict";var u=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=u(r("e86f")),n=u(r("9bf5")),a={name:"query-builder-group",components:{QueryBuilderRule:l.default},props:["ruleTypes","type","query","rules","index","maxDepth","depth","styled","labels"],methods:{ruleById(e){var t=null;return this.rules.forEach(function(r){if(r.id===e)return t=r,!1}),t},addRule(){let e=(0,n.default)(this.query),t={type:"query-builder-rule",query:{rule:this.selectedRule.id,selectedOperator:this.selectedRule.operators[0],selectedOperand:"undefined"===typeof this.selectedRule.operands?this.selectedRule.label:this.selectedRule.operands[0],value:null}};"multi-select"===this.ruleById(t.query.rule).type&&(t.query.value=[]),e.children.push(t),this.$emit("update:query",e)},addGroup(){let e=(0,n.default)(this.query);this.depth<this.maxDepth&&(e.children.push({type:"query-builder-group",query:{logicalOperator:this.labels.matchTypes[0].id,children:[]}}),this.$emit("update:query",e))},remove(){this.$emit("child-deletion-requested",this.index)},removeChild(e){let t=(0,n.default)(this.query);t.children.splice(e,1),this.$emit("update:query",t)}},data(){return{selectedRule:this.rules[0]}},computed:{classObject(){var e={"panel panel-default":this.styled};return e["depth-"+this.depth.toString()]=this.styled,e}}};t.default=a},"86b7":function(e,t,r){"use strict";var u=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=u(r("9bf5")),n={name:"query-builder-rule",props:["query","index","rule","styled","labels"],beforeMount(){"custom-component"===this.rule.type&&(this.$options.components[this.id]=this.rule.component)},methods:{remove:function(){this.$emit("child-deletion-requested",this.index)},updateQuery(e){let t=(0,l.default)(this.query);t.value=e,this.$emit("update:query",t)}},computed:{isCustomComponent(){return"custom-component"===this.rule.type},selectOptions(){return"undefined"===typeof this.rule.choices?{}:this.rule.choices.reduce(function(e,t,r){let u=t["group"];return"undefined"!==typeof u?(e[u]=e[u]||[],e[u].push(t)):e[r]=t,e},{})}},mounted(){let e=(0,l.default)(this.query);null===this.query.value&&("checkbox"===this.rule.inputType&&(e.value=[]),"select"===this.rule.type&&(e.value=this.rule.choices[0].value),"custom-component"===this.rule.type&&(e.value=null,"undefined"!==typeof this.rule.default&&(e.value=(0,l.default)(this.rule.default))),this.$emit("update:query",e))}};t.default=n},"87b1":function(e,t,r){"use strict";var u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vqb-rule",class:{"panel panel-default form-inline":e.styled}},[r("div",{class:{"form-group":e.styled}},[r("label",[e._v(e._s(e.rule.label))]),"undefined"!==typeof e.rule.operands?r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.selectedOperand,expression:"query.selectedOperand"}],class:{"form-control":e.styled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.query,"selectedOperand",t.target.multiple?r:r[0])}}},e._l(e.rule.operands,function(t){return r("option",[e._v(e._s(t))])}),0):e._e(),"undefined"!==typeof e.rule.operators&&e.rule.operators.length>1?r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.selectedOperator,expression:"query.selectedOperator"}],class:{"form-control":e.styled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.query,"selectedOperator",t.target.multiple?r:r[0])}}},e._l(e.rule.operators,function(t){return r("option",{domProps:{value:t}},[e._v("\n        "+e._s(t)+"\n      ")])}),0):e._e(),"text"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],class:{"form-control":e.styled},attrs:{type:"text",placeholder:e.labels.textInputPlaceholder},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),"number"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],class:{"form-control":e.styled},attrs:{type:"number"},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),"date"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],class:{"form-control":e.styled},attrs:{type:"date"},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),e.isCustomComponent?[r(e.rule.component,{tag:"component",attrs:{value:e.query.value},on:{input:e.updateQuery}})]:e._e(),"checkbox"===e.rule.inputType?r("div",{staticClass:"checkbox"},e._l(e.rule.choices,function(t){return r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{type:"checkbox"},domProps:{value:t.value,checked:Array.isArray(e.query.value)?e._i(e.query.value,t.value)>-1:e.query.value},on:{change:function(r){var u=e.query.value,l=r.target,n=!!l.checked;if(Array.isArray(u)){var a=t.value,o=e._i(u,a);l.checked?o<0&&e.$set(e.query,"value",u.concat([a])):o>-1&&e.$set(e.query,"value",u.slice(0,o).concat(u.slice(o+1)))}else e.$set(e.query,"value",n)}}}),e._v(" "+e._s(t.label)+"\n      ")])}),0):e._e(),"radio"===e.rule.inputType?r("div",{staticClass:"radio"},e._l(e.rule.choices,function(t){return r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{type:"radio"},domProps:{value:t.value,checked:e._q(e.query.value,t.value)},on:{change:function(r){return e.$set(e.query,"value",t.value)}}}),e._v(" "+e._s(t.label)+"\n      ")])}),0):e._e(),"select"===e.rule.inputType?r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],class:{"form-control":e.styled},attrs:{multiple:"multi-select"===e.rule.type},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.query,"value",t.target.multiple?r:r[0])}}},[e._l(e.selectOptions,function(t,u){return[Array.isArray(t)?e._e():r("option",{domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")]),Array.isArray(t)?r("optgroup",{attrs:{label:u}},e._l(t,function(t){return r("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])}),0):e._e()]})],2):e._e(),r("button",{class:{"close pull-right":e.styled},attrs:{type:"button"},domProps:{innerHTML:e._s(e.labels.removeRule)},on:{click:e.remove}})],2)])},l=[];r.d(t,"a",function(){return u}),r.d(t,"b",function(){return l})},"998e":function(e,t,r){"use strict";var u=r("bc04"),l=r.n(u);l.a},"9bf5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const u=function(e){if(Array.isArray(e))return e.map(u);if(e&&"object"===typeof e){for(var t={},r=Object.keys(e),l=0,n=r.length;l<n;l++){var a=r[l];t[a]=u(e[a])}return t}return e};var l=u;t.default=l},aac1:function(e,t,r){"use strict";r.r(t);var u=r("d8fa"),l=r("bd57");for(var n in l)"default"!==n&&function(e){r.d(t,e,function(){return l[e]})}(n);var a=r("2877"),o=Object(a["a"])(l["default"],u["a"],u["b"],!1,null,null,null);t["default"]=o.exports},bc04:function(e,t,r){},bd57:function(e,t,r){"use strict";r.r(t);var u=r("5df9"),l=r.n(u);for(var n in u)"default"!==n&&function(e){r.d(t,e,function(){return u[e]})}(n);t["default"]=l.a},ceb4:function(e,t,r){"use strict";r.r(t);var u=r("86b7"),l=r.n(u);for(var n in u)"default"!==n&&function(e){r.d(t,e,function(){return u[e]})}(n);t["default"]=l.a},d8fa:function(e,t,r){"use strict";var u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vqb-group",class:e.classObject},[r("div",{staticClass:"vqb-group-heading",class:{"panel-heading":e.styled}},[r("div",{staticClass:"match-type-container",class:{"form-inline":e.styled}},[r("div",{class:{"form-group":e.styled}},[r("label",{attrs:{for:"vqb-match-type"}},[e._v(e._s(e.labels.matchType))]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.logicalOperator,expression:"query.logicalOperator"}],class:{"form-control":e.styled},attrs:{id:"vqb-match-type"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.query,"logicalOperator",t.target.multiple?r:r[0])}}},e._l(e.labels.matchTypes,function(t,u){return r("option",{key:u,domProps:{value:t.id}},[e._v(e._s(t.label))])}),0)]),this.depth>1?r("button",{class:{"close pull-right":e.styled},attrs:{type:"button"},domProps:{innerHTML:e._s(e.labels.removeGroup)},on:{click:e.remove}}):e._e()])]),r("div",{staticClass:"vqb-group-body",class:{"panel-body":e.styled}},[r("div",{staticClass:"rule-actions",class:{"form-inline":e.styled}},[r("div",{class:{"form-group":e.styled}},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRule,expression:"selectedRule"}],class:{"form-control":e.styled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRule=t.target.multiple?r:r[0]}}},e._l(e.rules,function(t,u){return r("option",{key:u,domProps:{value:t}},[e._v(e._s(t.label))])}),0),r("button",{class:{"btn btn-default":e.styled},attrs:{type:"button"},domProps:{innerHTML:e._s(e.labels.addRule)},on:{click:e.addRule}}),this.depth<this.maxDepth?r("button",{class:{"btn btn-default":e.styled},attrs:{type:"button"},domProps:{innerHTML:e._s(e.labels.addGroup)},on:{click:e.addGroup}}):e._e()])]),r("div",{staticClass:"children"},e._l(e.query.children,function(t,u){return r(t.type,{key:u,tag:"component",attrs:{type:t.type,query:t.query,ruleTypes:e.ruleTypes,rules:e.rules,rule:e.ruleById(t.query.rule),index:u,maxDepth:e.maxDepth,depth:e.depth+1,styled:e.styled,labels:e.labels},on:{"update:query":function(r){return e.$set(t,"query",r)},"child-deletion-requested":e.removeChild}})}),1)])])},l=[];r.d(t,"a",function(){return u}),r.d(t,"b",function(){return l})},e0c4:function(e,t,r){"use strict";var u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vue-query-builder",class:{"vue-query-builder-styled":e.styled}},[r("query-builder-group",{attrs:{index:0,query:e.query,ruleTypes:e.ruleTypes,rules:e.mergedRules,maxDepth:e.maxDepth,depth:e.depth,styled:e.styled,labels:e.mergedLabels,type:"query-builder-group"},on:{"update:query":function(t){e.query=t}}})],1)},l=[];r.d(t,"a",function(){return u}),r.d(t,"b",function(){return l})},e86f:function(e,t,r){"use strict";r.r(t);var u=r("87b1"),l=r("ceb4");for(var n in l)"default"!==n&&function(e){r.d(t,e,function(){return l[e]})}(n);var a=r("2877"),o=Object(a["a"])(l["default"],u["a"],u["b"],!1,null,null,null);t["default"]=o.exports},ebd5:function(e,t,r){"use strict";r.r(t);var u=r("e0c4"),l=r("328a");for(var n in l)"default"!==n&&function(e){r.d(t,e,function(){return l[e]})}(n);r("998e");var a=r("2877"),o=Object(a["a"])(l["default"],u["a"],u["b"],!1,null,null,null);t["default"]=o.exports},f6fd:function(e,t){(function(e){var t="currentScript",r=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(u){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(u.stack)||[!1])[1];for(e in r)if(r[e].src==t||"interactive"==r[e].readyState)return r[e];return null}}})})(document)},fb15:function(e,t,r){"use strict";r.r(t);r("1eb2");var u=r("ebd5");for(var l in u)"default"!==l&&function(e){r.d(t,e,function(){return u[e]})}(l);t["default"]=u["default"]}})["default"]});
//# sourceMappingURL=VueQueryBuilder.umd.min.js.map